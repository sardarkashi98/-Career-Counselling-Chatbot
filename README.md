<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Student Counseling Assistant — Demo</title>
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --muted:#9aa4b2; --accent:#6ee7b7; --glass: rgba(255,255,255,0.04);
      --radius:14px; --shadow: 0 8px 30px rgba(2,6,23,0.6);
    }
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial}
    body{margin:0;background:linear-gradient(180deg,#071025 0%, #071628 60%);color:#e6eef6;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px}
    .wrap{width:1100px;max-width:98%;display:grid;grid-template-columns:420px 1fr;gap:22px}

    /* left panel - chat */
    .panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:var(--radius);padding:18px;box-shadow:var(--shadow)}
    .brand{display:flex;gap:12px;align-items:center;margin-bottom:10px}
    .logo{width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,#60a5fa,#7c3aed);display:grid;place-items:center;font-weight:700}
    .title{font-size:18px;margin:0}
    .subtitle{color:var(--muted);font-size:13px;margin-top:2px}

    .screenshot{width:100%;border-radius:10px;overflow:hidden;margin:12px 0}
    .screenshot img{width:100%;height:auto;display:block}

    .chatbox{height:450px;overflow:auto;padding:8px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));border:1px solid rgba(255,255,255,0.02)}
    .msg{display:flex;gap:10px;margin:10px 6px}
    .msg.user{justify-content:flex-end}
    .bubble{max-width:78%;padding:10px 12px;border-radius:12px;background:linear-gradient(180deg,#0b2a3b, #062435);box-shadow:0 4px 14px rgba(2,6,23,0.6);font-size:14px}
    .bubble.user{background:linear-gradient(90deg,#064e3b,#064a8a);color:#e6fff3}

    .controls{display:flex;gap:10px;margin-top:12px;align-items:center}
    .input{flex:1;background:transparent;border:1px solid rgba(255,255,255,0.04);padding:10px 12px;border-radius:10px;color:inherit}
    .btn{background:linear-gradient(90deg,#7c3aed,#06b6d4);border:none;padding:10px 14px;border-radius:10px;color:white;cursor:pointer}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06)}

    /* right panel - details */
    .meta{display:flex;flex-direction:column;gap:12px}
    .card{background:var(--card);padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.02)}
    .card h3{margin:0 0 8px 0}
    .chips{display:flex;flex-wrap:wrap;gap:8px}
    .chip{padding:8px 10px;border-radius:999px;background:var(--glass);font-size:13px;color:var(--muted);cursor:pointer}

    .suggestions{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
    .suggestion{padding:10px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));border:1px solid rgba(255,255,255,0.02)}

    footer.small{color:var(--muted);font-size:13px;text-align:center;margin-top:8px}

    /* responsive */
    @media (max-width:1024px){.wrap{grid-template-columns:1fr;}}
  </style>
</head>
<body>
  <div class="wrap">
    <section class="panel">
      <div class="brand">
        <div class="logo">S</div>
        <div>
          <h1 class="title">Student Counseling Assistant</h1>
          <div class="subtitle">Personalized guidance — study tips, mental health, career planning</div>
        </div>
      </div>

      <div class="screenshot">
        <!-- screenshot provided by user: keep src as-is or replace with your hosted image -->
        <img alt="app-screenshot" src="https://github.com/user-attachments/assets/a1b28441-a179-4f68-86da-5bf211cafd97" onerror="this.style.display='none'" />
      </div>

      <div class="card" style="margin-bottom:10px">
        <strong>Quick start</strong>
        <div style="color:var(--muted);font-size:13px;margin-top:6px">Choose mood, select topic, then ask. Responses are generated by a connected LLM (Gemini).</div>
      </div>

      <div id="chat" class="chatbox" aria-live="polite"></div>

      <div class="controls">
        <input id="prompt" class="input" placeholder="Describe what you need help with (e.g. exam anxiety, CV tips)..." />
        <button id="send" class="btn">Send</button>
        <button id="download" class="btn secondary">Download</button>
      </div>
    </section>

    <aside class="meta">
      <div class="card">
        <h3>Student profile</h3>
        <div style="display:flex;gap:8px;margin-bottom:8px">
          <input id="name" class="input" placeholder="Your name (optional)" style="padding:8px;border-radius:8px" />
          <select id="mood" class="input" style="width:140px">
            <option value="neutral">Feeling... Neutral</option>
            <option value="stressed">Stressed</option>
            <option value="confused">Confused</option>
            <option value="motivated">Motivated</option>
          </select>
        </div>
        <div class="chips" id="topics">
          <div class="chip" data-topic="study-plan">Study Plan</div>
          <div class="chip" data-topic="mental-health">Mental Health</div>
          <div class="chip" data-topic="time-management">Time Management</div>
          <div class="chip" data-topic="career-advice">Career Advice</div>
        </div>
      </div>

      <div class="card">
        <h3>Suggested prompts</h3>
        <div class="suggestions">
          <div class="suggestion">"Help me build a weekly study plan for exams"</div>
          <div class="suggestion">"How to explain a gap in my CV?"</div>
          <div class="suggestion">"Quick breathing exercises for anxiety"</div>
          <div class="suggestion">"How to pick electives aligned with AI careers"</div>
        </div>
      </div>

      <div class="card">
        <h3>How it works</h3>
        <ol style="color:var(--muted);font-size:13px;margin:0 0 0 16px">
          <li>Enter your question and press <strong>Send</strong>.</li>
          <li>The app sends a prompt to Gemini (replace the placeholder API key in the code).</li>
          <li>Response appears here; you can download the transcript.</li>
        </ol>
      </div>

      <div class="card">
        <h3>Privacy note</h3>
        <div style="color:var(--muted);font-size:13px">No data leaves the browser unless you connect a server key. For production, proxy requests through your backend and never expose API keys in client code.</div>
      </div>

      <div class="card small">
        <div class="small">Built with a demo Gemini integration • Replace API details before deploying.</div>
      </div>
    </aside>
  </div>

  <script>
    // Lightweight chat UI + demo Gemini integration (placeholder)
    const chat = document.getElementById('chat');
    const promptInput = document.getElementById('prompt');
    const sendBtn = document.getElementById('send');
    const downloadBtn = document.getElementById('download');

    function addMessage(text, who='bot'){
      const msg = document.createElement('div');
      msg.className = 'msg ' + (who==='user' ? 'user' : '');
      const bubble = document.createElement('div');
      bubble.className = 'bubble ' + (who==='user' ? 'user' : '');
      bubble.textContent = text;
      msg.appendChild(bubble);
      chat.appendChild(msg);
      chat.scrollTop = chat.scrollHeight;
    }

    sendBtn.addEventListener('click', async ()=>{
      const text = promptInput.value.trim();
      if(!text) return;
      addMessage(text, 'user');
      promptInput.value = '';

      addMessage('Thinking...');

      try{
        const profile = {name: document.getElementById('name').value, mood: document.getElementById('mood').value};
        const topicEls = Array.from(document.querySelectorAll('#topics .chip.selected')).map(el=>el.dataset.topic);
        const systemPrompt = `You are a compassionate student counselor. Respond concisely with practical steps and resources. Student profile: ${JSON.stringify(profile)}, topics: ${topicEls.join(',')}`;

        // Replace the below with your real server-side endpoint that forwards requests to Gemini.
        // Never put your real production API key in client-side code.
        const GEMINI_PROXY = 'https://your-backend.example.com/generate';

        // Demo: fake latency and canned answer if proxy not configured
        const responseText = await fetchGemini(GEMINI_PROXY, systemPrompt + '\nUser: ' + text);

        // remove the 'Thinking...' message (last bot bubble) and add real reply
        const lastBubble = chat.querySelectorAll('.bubble');
        lastBubble[lastBubble.length-1].textContent = responseText;
      }catch(err){
        console.error(err);
        const lastBubble = chat.querySelectorAll('.bubble');
        lastBubble[lastBubble.length-1].textContent = 'Sorry, something went wrong. Please check your Gemini proxy and API key.';
      }
    });

    // simple click-to-fill suggestions and chips
    document.querySelectorAll('.suggestion').forEach(el=>el.addEventListener('click', ()=>{promptInput.value=el.textContent;}));
    document.querySelectorAll('.chip').forEach(ch=>{
      ch.addEventListener('click', ()=>{ch.classList.toggle('selected');ch.style.background=ch.classList.contains('selected')? 'linear-gradient(90deg,#06b6d4,#7c3aed)' : ''});
    });

    downloadBtn.addEventListener('click', ()=>{
      const msgs = Array.from(document.querySelectorAll('.bubble')).map(b=>b.textContent);
      const blob = new Blob([msgs.join('\n\n')], {type:'text/plain'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'counseling-transcript.txt'; document.body.appendChild(a); a.click(); a.remove();
      URL.revokeObjectURL(url);
    });

    // Demo fetchGemini that posts to a proxy. If proxy returns {reply: "..."} use it. If proxy is not reachable, return a canned reply.
    async function fetchGemini(proxyUrl, prompt){
      if(!proxyUrl || proxyUrl.includes('your-backend')){
        // return a helpful canned reply while user configures backend
        await new Promise(r=>setTimeout(r,800));
        return `Hi — I see you're asking about: \"${prompt.slice(0,120)}\".\n\nHere are 3 quick steps:\n1) Take slow breaths for 60 seconds.\n2) Write down 3 concrete tasks you can start within 10 minutes.\n3) Schedule a short check-in with a counselor or peer.\n\nIf you'd like, connect a Gemini-backed proxy and I'll give a tailored plan.`;
      }

      // Example proxy POST body — your backend should translate this into the correct Gemini API call.
      const body = {model:'gemini-1.5', prompt};

      const res = await fetch(proxyUrl, {
        method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)
      });
      if(!res.ok) throw new Error('Proxy error');
      const data = await res.json();
      // expect {reply: '...'} or {choices:[{text:'...'}]}
      return data.reply || (data.choices && data.choices[0].text) || JSON.stringify(data);
    }

    // small accessibility: allow Enter to send
    promptInput.addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); sendBtn.click(); } });

    // welcome message
    addMessage('Hello 👋 I am your Student Counseling Assistant. Tell me what you\'re facing (exam stress, study plan, career questions).');
  </script>
</body>
</html>

